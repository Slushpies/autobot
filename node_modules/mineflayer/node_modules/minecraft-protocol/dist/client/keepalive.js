'use strict';

module.exports = function (client, options) {
  var keepAlive = options.keepAlive == null ? true : options.keepAlive;
  if (!keepAlive) return;

  var checkTimeoutInterval = options.checkTimeoutInterval || 20 * 1000;

  client.on('keep_alive', onKeepAlive);

  var timeout = null;

  function onKeepAlive(packet) {
    if (timeout) clearTimeout(timeout);
    timeout = setTimeout(function () {
      return client.end();
    }, checkTimeoutInterval);
    client.write('keep_alive', {
      keepAliveId: packet.keepAliveId
    });
  }
};
//# sourceMappingURL=../maps/client/keepalive.js.map
