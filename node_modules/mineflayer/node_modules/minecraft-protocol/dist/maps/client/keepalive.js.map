{"version":3,"sources":["client/keepalive.js"],"names":[],"mappings":"AAAA;;AAEA,OAAO,OAAP,GAAiB,UAAS,MAAT,EAAiB,OAAjB,EAA0B;AACzC,MAAM,YAAY,QAAQ,SAAR,IAAqB,IAArB,GAA4B,IAA5B,GAAmC,QAAQ,SAA7D;AACA,MAAI,CAAC,SAAL,EAAgB;;AAEhB,MAAM,uBAAuB,QAAQ,oBAAR,IAAgC,KAAK,IAAlE;;AAEA,SAAO,EAAP,CAAU,YAAV,EAAwB,WAAxB;;AAEA,MAAI,UAAU,IAAd;;AAEA,WAAS,WAAT,CAAqB,MAArB,EAA6B;AAC3B,QAAI,OAAJ,EACE,aAAa,OAAb;AACF,cAAU,WAAW;AAAA,aAAM,OAAO,GAAP,EAAN;AAAA,KAAX,EAA+B,oBAA/B,CAAV;AACA,WAAO,KAAP,CAAa,YAAb,EAA2B;AACzB,mBAAa,OAAO;AADK,KAA3B;AAGD;AAEF,CAnBD","file":"client/keepalive.js","sourcesContent":["'use strict';\n\nmodule.exports = function(client, options) {\n  const keepAlive = options.keepAlive == null ? true : options.keepAlive;\n  if (!keepAlive) return;\n\n  const checkTimeoutInterval = options.checkTimeoutInterval || 20 * 1000;\n\n  client.on('keep_alive', onKeepAlive);\n\n  let timeout = null;\n\n  function onKeepAlive(packet) {\n    if (timeout)\n      clearTimeout(timeout);\n    timeout = setTimeout(() => client.end(), checkTimeoutInterval);\n    client.write('keep_alive', {\n      keepAliveId: packet.keepAliveId\n    });\n  }\n\n};\n"],"sourceRoot":"/source/"}