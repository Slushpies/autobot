{"version":3,"sources":["client/setProtocol.js"],"names":[],"mappings":"AAAA;;AAEA,IAAM,SAAS,QAAQ,WAAR,CAAf;;AAEA,OAAO,OAAP,GAAiB,UAAS,MAAT,EAAiB,OAAjB,EAA0B;AACzC,SAAO,EAAP,CAAU,SAAV,EAAqB,SAArB;;AAEA,WAAS,SAAT,GAAqB;AACnB,QAAI,OAAO,YAAX,EAAyB;AACvB,aAAO,EAAP,CAAU,iBAAV,EAA6B,IAA7B;AACD,KAFD,MAEO;AACL;AACD;;AAED,aAAS,IAAT,GAAgB;AACd,UAAI,aAAa,QAAQ,IAAzB;AACA,UAAI,OAAO,OAAX,EAAoB,cAAc,OAAO,OAArB;;AAEpB,aAAO,KAAP,CAAa,cAAb,EAA6B;AAC3B,yBAAiB,QAAQ,eADE;AAE3B,oBAAY,UAFe;AAG3B,oBAAY,QAAQ,IAHO;AAI3B,mBAAW;AAJgB,OAA7B;AAMA,aAAO,KAAP,GAAe,OAAO,KAAtB;AACA,aAAO,KAAP,CAAa,aAAb,EAA4B;AAC1B,kBAAU,OAAO;AADS,OAA5B;AAGD;AACF;AACF,CA1BD","file":"client/setProtocol.js","sourcesContent":["'use strict';\n\nconst states = require(\"../states\");\n\nmodule.exports = function(client, options) {\n  client.on('connect', onConnect);\n\n  function onConnect() {\n    if (client.wait_connect) {\n      client.on('connect_allowed', next);\n    } else {\n      next();\n    }\n\n    function next() {\n      let taggedHost = options.host;\n      if (client.tagHost) taggedHost += client.tagHost;\n\n      client.write('set_protocol', {\n        protocolVersion: options.protocolVersion,\n        serverHost: taggedHost,\n        serverPort: options.port,\n        nextState: 2\n      });\n      client.state = states.LOGIN;\n      client.write('login_start', {\n        username: client.username\n      });\n    }\n  }\n};\n"],"sourceRoot":"/source/"}