{"version":3,"sources":["client/tcp_dns.js"],"names":[],"mappings":";;AAAA,IAAM,MAAM,QAAQ,KAAR,CAAZ;AACA,IAAM,MAAM,QAAQ,KAAR,CAAZ;;AAEA,OAAO,OAAP,GAAiB,UAAS,MAAT,EAAiB,OAAjB,EAA0B;AACzC,UAAQ,IAAR,GAAe,QAAQ,IAAR,IAAgB,KAA/B;AACA,UAAQ,IAAR,GAAe,QAAQ,IAAR,IAAgB,WAA/B;;AAEA,UAAQ,OAAR,GAAkB,UAAC,MAAD,EAAY;AAC5B,QAAI,QAAQ,MAAZ,EAAoB;AAClB,aAAO,SAAP,CAAiB,QAAQ,MAAzB;AACD,KAFD,MAEO,IAAI,QAAQ,IAAR,IAAgB,KAAhB,IAAyB,IAAI,IAAJ,CAAS,QAAQ,IAAjB,MAA2B,CAAxD,EAA2D;AAChE,UAAI,UAAJ,CAAe,qBAAqB,QAAQ,IAA5C,EAAkD,UAAS,GAAT,EAAc,SAAd,EAAyB;AACzE,YAAG,aAAa,UAAU,MAAV,GAAmB,CAAnC,EAAsC;AACpC,iBAAO,SAAP,CAAiB,IAAI,OAAJ,CAAY,UAAU,CAAV,EAAa,IAAzB,EAA+B,UAAU,CAAV,EAAa,IAA5C,CAAjB;AACD,SAFD,MAEO;AACL,iBAAO,SAAP,CAAiB,IAAI,OAAJ,CAAY,QAAQ,IAApB,EAA0B,QAAQ,IAAlC,CAAjB;AACD;AACF,OAND;AAOD,KARM,MAQA;AACL,aAAO,SAAP,CAAiB,IAAI,OAAJ,CAAY,QAAQ,IAApB,EAA0B,QAAQ,IAAlC,CAAjB;AACD;AACF,GAdD;AAeD,CAnBD","file":"client/tcp_dns.js","sourcesContent":["const net = require('net');\nconst dns = require('dns');\n\nmodule.exports = function(client, options) {\n  options.port = options.port || 25565;\n  options.host = options.host || 'localhost';\n\n  options.connect = (client) => {\n    if (options.stream) {\n      client.setSocket(options.stream);\n    } else if (options.port == 25565 && net.isIP(options.host) === 0) {\n      dns.resolveSrv(\"_minecraft._tcp.\" + options.host, function(err, addresses) {\n        if(addresses && addresses.length > 0) {\n          client.setSocket(net.connect(addresses[0].port, addresses[0].name));\n        } else {\n          client.setSocket(net.connect(options.port, options.host));\n        }\n      });\n    } else {\n      client.setSocket(net.connect(options.port, options.host));\n    }\n  };\n};\n"],"sourceRoot":"/source/"}